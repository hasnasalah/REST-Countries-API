(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function r(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?a.credentials="include":e.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(e){if(e.ep)return;e.ep=!0;const a=r(e);fetch(e.href,a)}})();class A{fullName;population;region;subRegion;capital;topLevelDomain;currencies;languages;borderCountries;image;code;constructor(o,r,i,e,a,s,t,c,f,h,d){this.fullName=o,this.population=r,this.region=i,this.subRegion=e,this.capital=a,this.topLevelDomain=s,this.currencies=t,this.languages=c,this.borderCountries=f,this.image=h,this.code=d}displayDetails(){return`
        Name: ${this.fullName.name}
        Native Name: ${this.fullName.nativeName}
        Population: ${this.population}
        Region: ${this.region}
        Capital: ${this.capital}
        top Level Domain:${this.topLevelDomain}
        Currencies: ${this.currencies}
        Languages: ${this.languages}
        Border Countries: ${this.borderCountries}
        Codes: ${this.code}
        `}}class F extends Error{constructor(o){super(o),this.name="NetworkError"}}class q extends Error{constructor(o){super(o),this.name="DataError"}}async function R(){const n="https://restcountries.com/v3.1/all?fields=name,cca2,cca3,capital,tld,subregion,currencies,languages,borders,flags",o="https://restcountries.com/v3.1/all?fields=population,region";try{const r=await fetch(n),i=await fetch(o);if(!r.ok||!i.ok)throw new F(`Response status: ${r.status}`);const e=await r.json(),a=await i.json(),s=[];for(const t of e){const c=t.name.nativeName?Object.values(t.name.nativeName)[0]:null,f=t.tld?t.tld.join(", "):"",h=t.currencies?Object.values(t.currencies).map(m=>m.name).join(", "):"",d=t.languages?Object.values(t.languages).join(", "):"",b=[t.cca2,t.cca3].join(", ");let E=[];if(t.borders&&Array.isArray(t.borders))for(let m of t.borders){let B=m;for(let D of e)if(D.cca3===m){B=D.name.official;break}E.push(B)}const y={name:t.name.official,nativeName:c?.official||t.name.official};let L=0,v="";for(const m of a){L=m.population,v=m.region;break}const x=new A(y,L,v,t.subregion,t.capital,f,h,d,E,t.flags.png,b);s.push(x)}return s}catch(r){throw console.error(r.message),new q("Failed to load country data")}}const l=document.getElementById("ul");let p=[];const N=document.getElementById("search"),g=document.getElementById("country-modal"),M=document.getElementById("image-container"),u=document.getElementById("info-a"),w=document.getElementById("info-b"),T=document.getElementById("info-c"),O=document.getElementById("info"),$=document.getElementById("title");async function j(n=p){if(!l||!N)return;l.style.display="grid",l.innerHTML="";const o=document.createDocumentFragment();n.forEach(r=>{const i=document.createElement("li"),e=document.createElement("img");e.src=r.image,e.style.height="auto";const a=document.createElement("h3");a.innerHTML=r.fullName.name;const s=document.createElement("p");s.innerHTML=`<strong>Population: </strong> ${r.population}`;const t=document.createElement("p");t.innerHTML="<strong>Region: </strong>"+r.region;const c=document.createElement("p");c.innerHTML="<strong>Capital: </strong>"+r.capital,i.appendChild(e),i.appendChild(a),i.appendChild(s),i.appendChild(t),i.appendChild(c),i.addEventListener("click",()=>{g&&(g.style.display="grid",l.style.display="none",k(r))}),o.appendChild(i)}),l.appendChild(o)}window.addEventListener("DOMContentLoaded",async()=>{p=await R(),j()});const I=document.getElementById("region-filter");function K(n=p,o){return n.filter(r=>r.region===o)}I?.addEventListener("change",async()=>{p=await R();let n=I.value,o=K(p,n);j(o)});let H=localStorage.getItem("darkmode");const V=document.getElementById("theme-toggle"),P=()=>{document.body.classList.add("darkmode"),localStorage.setItem("darkmode","active")},z=()=>{document.body.classList.remove("darkmode"),localStorage.setItem("darkmode","null")};H==="active"&&P();V?.addEventListener("click",()=>{H=localStorage.getItem("darkmode"),H!=="active"?P():z()});function k(n){if(S(),!g||!u||!O||!w||!T||!M||!$)return;const o=document.createElement("img");o.src=n.image,o.style.height="auto",M?.appendChild(o);const r=document.createElement("h3");r.innerHTML=n.fullName.name,$?.appendChild(r);const i=document.createElement("p");i.innerHTML=`<strong>Native Name: </strong> ${n.fullName.nativeName}`;const e=document.createElement("p");e.innerHTML=`<strong>Population: </strong> ${n.population}`;const a=document.createElement("p");a.innerHTML=`<strong>Region: </strong> ${n.region}`;const s=document.createElement("p");s.innerHTML=`<strong>Sub Region: </strong> ${n.subRegion}`;const t=document.createElement("p");t.innerHTML=`<strong>Capital: </strong> ${n.capital}`,u.appendChild(i),u.appendChild(e),u.appendChild(a),u.appendChild(s),u.appendChild(t);const c=document.createElement("p");c.innerHTML=`<strong>Top Level Domain: </strong> ${n.topLevelDomain}`;const f=document.createElement("p");f.innerHTML=`<strong>Currencies: </strong> ${n.currencies}`;const h=document.createElement("p");h.innerHTML=`<strong>Languages: </strong> ${n.languages}`,w.append(c,f,h);const d=document.createElement("div");d.classList.add("border-container");const b=document.createElement("strong");b.textContent="Borders: ",d.appendChild(b),n.borderCountries.forEach(E=>{const y=document.createElement("button");y.textContent=E,y.classList.add("border-btn"),y.addEventListener("click",()=>{const L=p.find(v=>v.fullName.name===E);L&&k(L)}),d.appendChild(y)}),T.appendChild(d)}function S(){!M||!u||!w||!T||!O||!$||($.innerHTML="",M.innerHTML="",u.innerHTML="",w.innerHTML="",T.innerHTML="")}const G=document.getElementById("close-modal");G?.addEventListener("click",()=>{!g||!l||(g.style.display="none",l.style.display="grid",S())});const C=document.getElementById("search-error");N.addEventListener("keydown",n=>{if(n.key==="Enter"){const o=N.value.toLowerCase().trim();if(o)C&&(C.style.display="none");else{C&&(C.textContent="Please type a country name.",C.style.display="block");return}for(let r of p)if(r.fullName.name.toLowerCase().includes(o)){k(r),l&&(l.style.display="none"),g&&(g.style.display="grid"),N.value="";break}}});
