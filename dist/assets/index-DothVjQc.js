(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function a(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(t){if(t.ep)return;t.ep=!0;const r=a(t);fetch(t.href,r)}})();class q{fullName;population;region;subRegion;capital;topLevelDomain;currencies;languages;borderCountries;image;code;constructor(o,a,i,t,r,s,e,c,f,h,d){this.fullName=o,this.population=a,this.region=i,this.subRegion=t,this.capital=r,this.topLevelDomain=s,this.currencies=e,this.languages=c,this.borderCountries=f,this.image=h,this.code=d}displayDetails(){return`
        Name: ${this.fullName.name}
        Native Name: ${this.fullName.nativeName}
        Population: ${this.population}
        Region: ${this.region}
        Capital: ${this.capital}
        top Level Domain:${this.topLevelDomain}
        Currencies: ${this.currencies}
        Languages: ${this.languages}
        Border Countries: ${this.borderCountries}
        Codes: ${this.code}
        `}}class K extends Error{constructor(o){super(o),this.name="NetworkError"}}class V extends Error{constructor(o){super(o),this.name="DataError"}}async function O(){const n="https://restcountries.com/v3.1/all?fields=name,cca2,cca3,capital,tld,subregion,currencies,languages,borders,flags",o="https://restcountries.com/v3.1/all?fields=cca2,cca3,population,region";try{const a=await fetch(n),i=await fetch(o);if(!a.ok||!i.ok)throw new K(`Response status: ${a.status}`);const t=await a.json(),r=await i.json(),s=[];for(const e of t){const c=e.name.nativeName?Object.values(e.name.nativeName)[0]:null,f=e.tld?e.tld.join(", "):"",h=e.currencies?Object.values(e.currencies).map(m=>m.name).join(", "):"",d=e.languages?Object.values(e.languages).join(", "):"",b=[e.cca2,e.cca3].join(", ");let E=[];if(e.borders&&Array.isArray(e.borders))for(let m of e.borders){let D=m;for(let k of t)if(k.cca3===m){D=k.name.official;break}E.push(D)}const y={name:e.name.official,nativeName:c?.official||e.name.official},L=r.find(m=>m.cca2===e.cca2||m.cca3===e.cca3),B=L?.population,A=L?.region,F=new q(y,B,A,e.subregion,e.capital,f,h,d,E,e.flags.png,b);s.push(F)}return s}catch(a){throw console.error(a.message),new V("Failed to load country data")}}const l=document.getElementById("ul");let p=[];const v=document.getElementById("search"),N=document.getElementById("search-section"),g=document.getElementById("country-modal"),M=document.getElementById("image-container"),u=document.getElementById("info-a"),w=document.getElementById("info-b"),T=document.getElementById("info-c"),j=document.getElementById("info"),$=document.getElementById("title");async function P(n=p){if(!l||!v||!N)return;l.style.display="grid",l.innerHTML="";const o=document.createDocumentFragment();n.forEach(a=>{const i=document.createElement("li"),t=document.createElement("img");t.src=a.image,t.style.height="auto";const r=document.createElement("h3");r.innerHTML=a.fullName.name;const s=document.createElement("p");s.innerHTML=`<strong>Population: </strong> ${a.population}`;const e=document.createElement("p");e.innerHTML="<strong>Region: </strong>"+a.region;const c=document.createElement("p");c.innerHTML="<strong>Capital: </strong>"+a.capital,i.appendChild(t),i.appendChild(r),i.appendChild(s),i.appendChild(e),i.appendChild(c),i.addEventListener("click",()=>{g&&(g.style.display="grid",l.style.display="none",N.style.display="none",I(a))}),o.appendChild(i)}),l.appendChild(o)}window.addEventListener("DOMContentLoaded",async()=>{p=await O(),P()});const R=document.getElementById("region-filter");function z(n=p,o){return n.filter(a=>a.region===o)}R?.addEventListener("change",async()=>{p=await O();let n=R.value,o=z(p,n);P(o)});let H=localStorage.getItem("darkmode");const G=document.getElementById("theme-toggle"),S=()=>{document.body.classList.add("darkmode"),localStorage.setItem("darkmode","active")},J=()=>{document.body.classList.remove("darkmode"),localStorage.setItem("darkmode","null")};H==="active"&&S();G?.addEventListener("click",()=>{H=localStorage.getItem("darkmode"),H!=="active"?S():J()});function I(n){if(x(),!g||!u||!j||!w||!T||!M||!$)return;const o=document.createElement("img");o.src=n.image,o.style.height="auto",M?.appendChild(o);const a=document.createElement("h3");a.innerHTML=n.fullName.name,$?.appendChild(a);const i=document.createElement("p");i.innerHTML=`<strong>Native Name: </strong> ${n.fullName.nativeName}`;const t=document.createElement("p");t.innerHTML=`<strong>Population: </strong> ${n.population}`;const r=document.createElement("p");r.innerHTML=`<strong>Region: </strong> ${n.region}`;const s=document.createElement("p");s.innerHTML=`<strong>Sub Region: </strong> ${n.subRegion}`;const e=document.createElement("p");e.innerHTML=`<strong>Capital: </strong> ${n.capital}`,u.appendChild(i),u.appendChild(t),u.appendChild(r),u.appendChild(s),u.appendChild(e);const c=document.createElement("p");c.innerHTML=`<strong>Top Level Domain: </strong> ${n.topLevelDomain}`;const f=document.createElement("p");f.innerHTML=`<strong>Currencies: </strong> ${n.currencies}`;const h=document.createElement("p");h.innerHTML=`<strong>Languages: </strong> ${n.languages}`,w.append(c,f,h);const d=document.createElement("div");d.classList.add("border-container");const b=document.createElement("strong");b.textContent="Borders: ",d.appendChild(b),n.borderCountries.forEach(E=>{const y=document.createElement("button");y.textContent=E,y.classList.add("border-btn"),y.addEventListener("click",()=>{const L=p.find(B=>B.fullName.name===E);L&&I(L)}),d.appendChild(y)}),T.appendChild(d)}function x(){!M||!u||!w||!T||!j||!$||($.innerHTML="",M.innerHTML="",u.innerHTML="",w.innerHTML="",T.innerHTML="")}const Q=document.getElementById("close-modal");Q?.addEventListener("click",()=>{!g||!l||!N||(g.style.display="none",l.style.display="grid",N.style.display="flex",x())});const C=document.getElementById("search-error");v.addEventListener("keydown",n=>{if(n.key==="Enter"){const o=v.value.toLowerCase().trim();if(o)C&&(C.style.display="none");else{C&&(C.textContent="Please type a country name.",C.style.display="block");return}for(let a of p)if(a.fullName.name.toLowerCase().includes(o)){I(a),l&&(l.style.display="none"),g&&(g.style.display="grid"),v.value="";break}}});
